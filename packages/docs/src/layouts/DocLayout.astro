---
import BaseLayout from './BaseLayout.astro'
import { NavigationBar } from './NavigationBar'
import type { NavigationBarItem } from './NavigationBar'
import { basename } from 'path'
import { GScrollbar } from '@lingjhf/guava'

const componentsPosts = await Astro.glob('../pages/components/*.astro')
const navItems = componentsPosts.map((item) => {
  return {
    title:
      basename(item.url!)
        ?.replace(/(\w)/, (a: string) => a.toUpperCase())
        ?.replaceAll('-', ' ') ?? '',
    url: `${item.url}/`,
  }
}) as NavigationBarItem[]
const pathname = Astro.url.pathname
---

<BaseLayout pageTitle={''}>
  <div class="flex h-screen w-screen">
    <div class="h-full w-300px">
      <NavigationBar client:only="solid-js" value={pathname} items={navItems} />
    </div>
    <div class="h-full w-full">
      <GScrollbar client:only="solid-js">
        <div class="p-32px">
          <slot />
        </div>
      </GScrollbar>
    </div>
  </div>
</BaseLayout>
